# Create a multi-stage build to reduce the size of the final image
FROM node:10.14.2-jessie as builder
WORKDIR /app
COPY package*.json ./
COPY tsconfig*.json ./
COPY server server
RUN yarn install && yarn build



FROM node:10.14.2-jessie
WORKDIR /app
COPY package*.json ./
ENV WEB_PORT=3000
ENV DV_URL=http://127.0.0.1:3001/dv
ENV A_URL=http://127.0.0.1:3002/a
RUN yarn install --production
COPY --from=builder /app/dist dist
#CMD esto corre el comando una ves levantado el contenedor.
CMD ["yarn", "start"]
